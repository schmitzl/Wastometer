<!DOCTYPE HTML>
<html>
<head>
<title>Wastometer</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="wastometer" />
<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
<!-- Custom Theme files -->
<link href="css/style.css" rel='stylesheet' type='text/css' />  
<script src="js/jquery-1.11.1.min.js"></script>
<!--webfonts-->
 <!--<link href='//fonts.googleapis.com/css?family=Poiret+One|Lily+Script+One|Raleway:400,300,500,600,200,700' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Chivo" rel="stylesheet">-->
<!--//webfonts-->
</head>
<body>
<!--start-home-->
            <div id="header">   
                <h1>Wast-o-meter</h1>
            </div>
            <div id="date">
                Thursday
            </div>
    
         <div id="main">    

             <img src="images/donut.png"/>

             <div id="waste-info">
                <div class="row">
                    <!--div id="waste-number-description" class="col-md-3">
                        Wasted food <br>
                        this week
                    </div-->
                    <div id="price-holder" class="text col-md-3">
                         <span id="price">0</span>kr
                     </div>
                     
                    <div id="number-wasted-portions" class="col-md-6">0</div>

                    <div id="weight-holder" class="text col-md-3">
                         <span id="weight">0</span>kg
                     </div>
                    <!--div id="additional-waste-info" class="col-md-3">
                        portions<br>
                    </div-->
                </div>
             </div>
             <div class="row">
                <div id="dynamic-info" class="col-md-12">Portions wasted this week </div>
                 <!--div id="price-holder" class="text col-md-2">
                     <span id="price">0</span>kr
                 </div>
                 <div id="weight-holder" class="text col-md-2">
                     <span id="weight">0</span>kg
                 </div>
                 <div class="col-md-4"></div-->
             </div>

             <!--div id="dynamic-info">
                <button id="btnZ" class="btn btn-info" onclick="addWeight(1000)">Add Weight</button>
             </div-->
        
                
        </div>

</body>
</html>

<script>

var weight = 0;

function addWeight(data) {
    if(weight+data >= 0) {
        weight += data;
    }
    
    CalculatePortions(weight);
}

function CalculatePortions(weight)
{
   var portions = weight/500;
   document.getElementById("number-wasted-portions").innerHTML = portions;
   var price = portions*60;
   var kgs = weight/1000;
   document.getElementById("price").innerHTML = price.toFixed(0);
   document.getElementById("weight").innerHTML = kgs.toFixed(2);
}

function clicked (amount) {
    addWeight(amount);
    //some code
}
document.onkeydown = function (e) {
    var keyCode = e.keyCode;
    if(keyCode == 90) {
        clicked(-500);
    }
    if(keyCode == 88) {
        clicked(-100);
    }
    if(keyCode == 67) {
        clicked(100);
    }
    if(keyCode == 86) {
        clicked(500);
    }
};

//btnZ.onclick = clicked;

</script>

<!-- D3 -->

<svg width="960" height="500"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>

//var weights = [10,11,20,30,43,24];

var svg = d3.select("svg"),
    margin = {top: 20, right: 20, bottom: 30, left: 50},
    width = +svg.attr("width") - margin.left - margin.right,
    height = +svg.attr("height") - margin.top - margin.bottom,
    g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var parseTime = d3.timeParse("%d-%b-%y");

var x = d3.scaleTime()
    .rangeRound([0, width]);

var y = d3.scaleLinear()
    .rangeRound([height, 0]);

var line = d3.line()
    .x(function(d) { return x(d.date); })
    .y(function(d) { return y(d.close); });

d3.tsv("data.tsv", function(d) {
  d.date = parseTime(d.date);
  d.close = +d.close;
  return d;
}, function(error, data) {
  if (error) throw error;

  x.domain(d3.extent(data, function(d) { return d.date; }));
  y.domain(d3.extent(data, function(d) { return d.close; }));

  g.append("g")
      .attr("class", "axis axis--x")
      .attr("transform", "translate(0," + height + ")")
      .call(d3.axisBottom(x));

  g.append("g")
      .attr("class", "axis axis--y")
      .call(d3.axisLeft(y))
    .append("text")
      .attr("fill", "#000")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", "0.71em")
      .style("text-anchor", "end")
      .text("Price ($)");

  g.append("path")
      .datum(data)
      .attr("class", "line")
      .attr("d", line);
});

</script>